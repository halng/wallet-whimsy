#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

PATTERN="^(feat|fix|chore|docs|refactor|test|style|perf):\s.+$"

echo "üîç Checking commit message..."
if ! echo "$COMMIT_MSG" | grep -Pq "$PATTERN"; then
  echo "‚ùå Invalid commit message format."
  echo "‚ùå Required: action: message"
  echo "‚ùå Example: feat: add dark mode support"
  echo "‚ùå Allowed actions: feat, fix, chore, docs, refactor, test, style, perf"
  exit 1
fi